{
	"info": {
		"_postman_id": "e03cef10-a342-4685-8cd5-346bc99b3009",
		"name": "Eduhub-api",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "44800610",
		"_collection_link": "https://ales-7556578.postman.co/workspace/Ales's-Workspace~308c49fb-e65f-46cd-8f32-38898b011fac/collection/44800610-e03cef10-a342-4685-8cd5-346bc99b3009?action=share&source=collection_link&creator=44800610"
	},
	"item": [
		{
			"name": "Módulo Cursos/catalogo",
			"item": [
				{
					"name": "GET - Obtener todos los cursos",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/curso",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"curso"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST - Crear nuevo curso",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Node.js desde cero\",\r\n  \"descripcion\": \"Curso práctico para backend con Node.js\",\r\n  \"precio\": 89.99,\r\n  \"id_categoria\": 1\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/curso",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"curso"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET - Obtener curso por ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/curso/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"curso",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT - Actualizar curso",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Node.js Avanzado\",\r\n  \"descripcion\": \"Curso completo avanzado con Node.js\",\r\n  \"precio\": 99.99,\r\n  \"id_categoria\": 1\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/curso/5",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"curso",
								"5"
							]
						}
					},
					"response": []
				},
				{
					"name": "DELETE - Eliminar (desactivar) curso",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/curso/5",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"curso",
								"5"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Módulo Categorías",
			"item": [
				{
					"name": "GET - Obtener todas las categorías",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/categoria",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"categoria"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET - Obtener categoría por ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/categoria/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"categoria",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST - Crear nueva categoría",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Diseño\",\r\n  \"descripcion\": \"Cursos relacionados al diseño digital\",\r\n  \"activo\": true\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/categoria",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"categoria"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT - Actualizar categoría",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Diseño gráfico\",\r\n  \"descripcion\": \"Actualizado\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/categoria/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"categoria",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "DELETE - Eliminar categoría",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/categoria/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"categoria",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Módulo Usuarios",
			"item": [
				{
					"name": "GET - Obtener todos los usuarios",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET - Obtener usuario por ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST - Crear nuevo usuario",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Omar\",\r\n  \"correo\": \"ogd_7@gmail.com\",\r\n  \"contrasena\": \"123456\",\r\n  \"rol\": \"cliente\",\r\n  \"activo\": 1\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT - Actualizar usuario",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"nombre\": \"Carlos R. Ruizxdssd\",\r\n  \"correo\": \"carlos.rruiz@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "DELETE - Eliminar usuario",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Módulo Carrito",
			"item": [
				{
					"name": "Agregar curso al carrito",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"id_usuario\": 1,\r\n  \"id_curso\": 3\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/carrito/agregar",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"carrito",
								"agregar"
							]
						}
					},
					"response": []
				},
				{
					"name": "Obtener carrito del usuario",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/carrito/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"carrito",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Eliminar curso específico del carrito",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/carrito/4/curso/3",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"carrito",
								"4",
								"curso",
								"3"
							]
						}
					},
					"response": []
				},
				{
					"name": "Vaciar carrito del usuario",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/carrito/vaciar/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"carrito",
								"vaciar",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Módulo Pedidos",
			"item": [
				{
					"name": "Checkout: crear pedido desde carrito",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/pedido/checkout/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"pedido",
								"checkout",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Pedidos actuales (pendientes)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/pedido/actuales/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"pedido",
								"actuales",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Pedidos históricos (pagado/cancelado)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/pedido/historico/2",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"pedido",
								"historico",
								"2"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancelar un pedido (si está pendiente)",
					"request": {
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/pedido/cancelar/15",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"pedido",
								"cancelar",
								"15"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Seguridad",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"\r",
									"if (pm.response.code === 200) {\r",
									"  const data = pm.response.json();\r",
									"  const access = data.access_token || data.token;\r",
									"  const refresh = data.refresh_token;\r",
									"\r",
									"  if (access) {\r",
									"    pm.collectionVariables.set('token', access);   // para Authorization: Bearer {{token}}\r",
									"    console.log('Access token guardado en {{token}}');\r",
									"  }\r",
									"  if (refresh) {\r",
									"    pm.collectionVariables.set('refresh_token', refresh);\r",
									"  }\r",
									"} else {\r",
									"  pm.collectionVariables.unset('token');\r",
									"  pm.collectionVariables.unset('refresh_token');\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"correo\": \"alessandrog@gmail.com\", \"contrasena\": \"123456\" }\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/auth/login",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Refresh token",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZF91c3VhcmlvIjo3LCJpYXQiOjE3NTYwODQzNjgsImV4cCI6MTc1NjY4OTE2OH0.DVQy6Ri7-bubYaKskCHCfk10x5f0VjSpBFpfJx-KCR4\" }\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:4001/api/v1/auth/refresh",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"auth",
								"refresh"
							]
						}
					},
					"response": []
				},
				{
					"name": "Bloquear",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario/5/bloquear",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario",
								"5",
								"bloquear"
							]
						}
					},
					"response": []
				},
				{
					"name": "Desbloquear",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "http://localhost:4001/api/v1/usuario/5/desbloquear",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "4001",
							"path": [
								"api",
								"v1",
								"usuario",
								"5",
								"desbloquear"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "MongoDB",
			"item": [
				{
					"name": "notificacion id",
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base",
			"value": "http://localhost:4001/api/v1",
			"type": "string",
			"description": {
				"content": "",
				"type": "text/plain"
			}
		},
		{
			"key": "token",
			"value": ""
		},
		{
			"key": "refresh_token",
			"value": ""
		}
	]
}